# チューサポ - ソフトウェア仕様書・要件定義書

**ドキュメントバージョン**: 1.0
**作成日**: 2025年12月21日
**最終更新**: 2025年12月21日
**ステータス**: フロントエンド完成、バックエンド開発準備中

---

## 1. プロジェクト概要

### 1.1 ソフトウェア名称
- **正式名称**: チューサポ
- **旧称**: 穿刺の相談所、MedConsult
- **コンセプト**: 「注射に悩んだらここ！看護師のための穿刺お助けコミュニティ」

### 1.2 ソフトウェアの目的
「注射や採血、ルート確保などの穿刺で悩んだ時に、このサイトに来れば悩みが解決できる」という本質的価値を提供する医療従事者向けQ&Aプラットフォーム。

### 1.3 解決する課題

| 課題 | 詳細 |
|------|------|
| 穿刺技術の習得困難 | 実践的なノウハウが形式知化されていない |
| 相談機会の不足 | 忙しい現場で先輩に質問しづらい環境 |
| 教育時間の不足 | 医療現場の人手不足による教育機会減少 |
| 失敗例からの学習不足 | 失敗事例の共有・蓄積がされていない |
| 暗黙知の伝承困難 | ベテランの技術が後輩に伝わりにくい |

### 1.4 対象ユーザー

**プライマリユーザー**:
- 看護師（特に新人〜中堅）
- 臨床検査技師
- 研修医

**セカンダリユーザー**:
- ベテラン看護師（回答者として）
- 医師（専門的アドバイス提供者）
- 医療教育担当者

---

## 2. システム要件

### 2.1 技術スタック

| カテゴリ | 技術 | バージョン |
|----------|------|-----------|
| フロントエンドフレームワーク | React | 18.3.1 |
| 言語 | TypeScript | 5.5.3 |
| ビルドツール | Vite | 5.4.2 |
| スタイリング | Tailwind CSS | 3.4.1 |
| アイコン | Lucide React | 0.344.0 |
| データ永続化 | LocalStorage | - |

### 2.2 対応環境

**ブラウザ要件**:
- Google Chrome（最新版）
- Mozilla Firefox（最新版）
- Safari（最新版）
- Microsoft Edge（最新版）

**画面サイズ対応**:
- モバイル: 375px〜
- タブレット: 768px〜
- デスクトップ: 1024px〜

### 2.3 パフォーマンス要件

| 指標 | 目標値 |
|------|--------|
| 初期ロード時間 | < 2秒 |
| ページ遷移 | < 500ms |
| 検索・フィルター応答 | < 200ms |
| LocalStorage使用量 | < 5MB |
| メモリ使用量 | < 50MB |

---

## 3. 機能要件

### 3.1 質問・回答システム（コア機能）

#### 3.1.1 質問機能

| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| Q-001 | 質問投稿 | タイトル・内容・カテゴリーを設定して質問を投稿 | 必須 |
| Q-002 | 質問編集 | 投稿者のみが自身の質問を編集可能 | 必須 |
| Q-003 | 質問削除 | 投稿者のみが自身の質問を削除可能 | 必須 |
| Q-004 | 下書き自動保存 | フォーム入力内容をLocalStorageに自動保存 | 必須 |
| Q-005 | いいね機能 | 質問への評価（トグル対応・取り消し可能） | 必須 |
| Q-006 | インライン回答表示 | 質問カード内で回答を段階的に展開表示 | 必須 |

#### 3.1.2 回答機能

| 機能ID | 機能名 | 説明 | 優先度 |
|--------|--------|------|--------|
| A-001 | 回答投稿 | 質問に対する回答を投稿 | 必須 |
| A-002 | ベストアンサー選択 | 質問者が最も役立った回答を選択 | 必須 |
| A-003 | 感謝機能 | 回答への感謝表現（実践後の評価） | 必須 |
| A-004 | 感謝数順ソート | 感謝数の多い回答を優先表示 | 必須 |

#### 3.1.3 評価システムの差別化

| 評価種別 | 対象 | 意味 | 用途 |
|----------|------|------|------|
| いいね | 質問 | 質問してくれてありがとう | 質問する勇気への称賛 |
| 感謝 | 回答 | 実際に役立った | 実践的価値への評価 |

### 3.2 穿刺カテゴリー

| カテゴリー名 | 説明 | アイコン色 |
|--------------|------|------------|
| 注射 | 筋肉注射・皮下注射の技術とコツ | 赤〜ピンク |
| 採血 | 静脈採血の技術とトラブルシューティング | 青〜シアン |
| ルート確保 | 静脈内アクセスとカテーテル留置 | エメラルド〜ティール |
| 動脈穿刺 | 動脈血ガスと動脈アクセス | 紫〜インディゴ |
| その他 | その他の穿刺技術や関連質問 | グレー |

### 3.3 ユーザー管理システム

#### 3.3.1 3段階認証システム

| ユーザー種別 | 認証要件 | 可能な操作 | バッジ |
|--------------|----------|------------|--------|
| 一般ユーザー | メールアドレスのみ | 質問閲覧・投稿、基本的な回答 | なし |
| 認証済みユーザー | 簡易プロフィール（職種・経験年数・専門分野） | 専門的な回答、「医療従事者」バッジ表示 | 医療従事者バッジ |
| 検証済み専門家 | 医師免許等のアップロード（任意） | 「検証済み専門家」ゴールドバッジ、優先表示 | ゴールドバッジ |

#### 3.3.2 ユーザープロフィール

| 項目 | 説明 | 必須/任意 |
|------|------|-----------|
| 名前 | 表示名 | 必須 |
| 役職 | 医師・看護師・技師など | 必須 |
| 専門分野 | 専門領域 | 任意 |
| 経験年数 | 臨床経験 | 任意 |
| 勤務地 | 地域情報 | 任意 |
| 自己紹介 | 経歴・得意分野など | 任意 |
| SNSリンク | YouTube, Instagram, Twitter等 | 任意 |

### 3.4 感謝・マイルストーンシステム

#### 3.4.1 8段階称号システム

| レベル | 称号名 | 必要感謝数 | バッジ種別 |
|--------|--------|-----------|-----------|
| 1 | 初回貢献者 | 1 | Bronze Badge |
| 2 | 頼れるアドバイザー | 10 | Bronze Shield |
| 3 | 信頼される専門家 | 100 | Silver Shield |
| 4 | コミュニティの柱 | 500 | Silver Crown |
| 5 | ゴールドエキスパート | 1,000 | Gold Shield |
| 6 | マスタープロフェッショナル | 5,000 | Gold Crown |
| 7 | レジェンドマスター | 10,000 | Platinum Shield |
| 8 | 殿堂入り専門家 | 50,000 | Platinum Crown |

### 3.5 検索・フィルター機能

| 機能 | 説明 |
|------|------|
| キーワード検索 | タイトル・内容・作者・タグを対象に全文検索 |
| カテゴリーフィルター | 5つの穿刺カテゴリーで絞り込み |
| ソート | 新着順（デフォルト） |

### 3.6 通知システム

| 通知種別 | トリガー | 通知内容 |
|----------|----------|----------|
| 感謝通知 | 回答に感謝された時 | 「○○さんから感謝を受け取りました」 |
| 称号獲得通知 | 新称号到達時 | 「新しい称号『○○』を獲得しました」 |
| ブラウザ通知 | 許可時 | デスクトップ通知表示 |

---

## 4. 非機能要件

### 4.1 セキュリティ要件

| 項目 | 対策 |
|------|------|
| XSS対策 | Reactの自動エスケープ機能 |
| 入力検証 | フォームバリデーション |
| プライバシー保護 | 患者情報の完全匿名化を促すUI設計 |
| HIPAA準拠 | 医療情報保護ガイドラインへの配慮 |

### 4.2 アクセシビリティ要件

| 項目 | 対応 |
|------|------|
| キーボード操作 | 全機能のキーボードナビゲーション対応 |
| スクリーンリーダー | ARIA属性の適切な設定 |
| カラーコントラスト | WCAG 2.1 AA準拠 |
| レスポンシブ | マルチデバイス対応 |

### 4.3 法的要件

| 項目 | 対応 |
|------|------|
| 免責事項 | 「医療アドバイスではない」旨の明確な表示 |
| 投稿への免責 | 各投稿への免責文言自動付与（将来実装） |
| 危険コンテンツ対策 | AIによる自動検出（将来実装） |

---

## 5. データモデル

### 5.1 質問（Question）

```typescript
interface Question {
  id: string;              // 一意識別子
  title: string;           // 質問タイトル
  content: string;         // 質問本文
  author: string;          // 投稿者名
  authorRole: string;      // 投稿者役職
  authorId?: string;       // 投稿者ID
  timeAgo: string;         // 経過時間表示
  likes: number;           // いいね数
  answers: number;         // 回答数
  tags: string[];          // カテゴリータグ
  hasAcceptedAnswer: boolean; // ベストアンサー有無
  createdAt: Date;         // 作成日時
}
```

### 5.2 回答（Answer）

```typescript
interface Answer {
  id: string;              // 一意識別子
  questionId: string;      // 対象質問ID
  content: string;         // 回答本文
  author: string;          // 投稿者名
  authorRole: string;      // 投稿者役職
  authorId?: string;       // 投稿者ID
  gratitude: number;       // 感謝数
  isAccepted: boolean;     // ベストアンサーフラグ
  createdAt: Date;         // 作成日時
}
```

### 5.3 ユーザー（User）

```typescript
interface User {
  id: string;              // 一意識別子
  name: string;            // 表示名
  role: string;            // 役職
  email?: string;          // メールアドレス
  totalGratitude: number;  // 累計感謝数
  currentTitle: string;    // 現在の称号
  notificationSettings: {
    receiveNotifications: boolean;
    soundNotifications: boolean;
  };
  socialLinks?: {          // SNSリンク
    youtube?: string;
    instagram?: string;
    twitter?: string;
    linkedin?: string;
    website?: string;
  };
}
```

### 5.4 感謝（Gratitude）

```typescript
interface Gratitude {
  id: string;              // 一意識別子
  answerId: string;        // 対象回答ID
  fromUserId: string;      // 感謝した人
  toUserId: string;        // 感謝された人
  createdAt: Date;         // 感謝日時
}
```

---

## 6. UI/UX設計

### 6.1 デザイン原則

1. **シンプルさ**: Google検索のような直感的な操作感
2. **モバイルファースト**: 忙しい医療現場での利用を想定
3. **信頼感**: 医療プラットフォームとしての専門性を表現
4. **親しみやすさ**: 女性看護師（8-9割）に響く柔らかいデザイン

### 6.2 カラーパレット

| 用途 | 色 | 意味 |
|------|-----|------|
| プライマリ | Blue (500-600) | 信頼性・医療的専門性 |
| セカンダリ | Purple (500-600) | 革新性・成長 |
| 感謝・いいね | Red | 情熱・感謝の気持ち |
| 解決済み | Emerald | 成功・完了 |
| 専門家バッジ | Yellow/Gold | 専門性・信頼 |

### 6.3 主要画面構成

| 画面 | 機能 |
|------|------|
| ホーム | 質問一覧、カテゴリー、統計情報 |
| 質問詳細 | 質問内容、回答一覧、いいね・感謝 |
| 質問投稿 | フォーム入力、カテゴリー選択 |
| 回答一覧 | 未回答質問への回答画面 |
| プロフィール | ユーザー情報、実績、活動履歴 |
| ガイドライン | 利用規約、使い方説明 |
| チューサポについて | ブランドストーリー、コンセプト説明 |

### 6.4 アニメーション・インタラクション

| 機能 | エフェクト |
|------|----------|
| いいねボタン | ハートパルスアニメーション |
| 感謝ボタン | 合掌アイコン + ピンクハート浮遊 |
| モーダル | スムーズなフェードイン/アウト |
| ページ遷移 | スクロール位置保持・復元 |

---

## 7. 画面遷移図

```
┌─────────────────────────────────────────────────────────────┐
│                        ホーム画面                            │
│  ┌─────────────────────────────────────────────────────┐    │
│  │ ・質問一覧（カード形式）                               │    │
│  │ ・検索・フィルター                                     │    │
│  │ ・カテゴリー別参照                                     │    │
│  │ ・クイックアクション                                   │    │
│  │ ・感謝ランキング1位                                    │    │
│  └─────────────────────────────────────────────────────┘    │
└───────────────────────────┬─────────────────────────────────┘
                            │
        ┌───────────────────┼───────────────────┐
        │                   │                   │
        ▼                   ▼                   ▼
┌───────────────┐   ┌───────────────┐   ┌───────────────┐
│  質問詳細      │   │  質問投稿      │   │  プロフィール  │
│  モーダル      │   │  モーダル      │   │  画面          │
│               │   │               │   │               │
│ ・質問内容    │   │ ・タイトル入力 │   │ ・ユーザー情報 │
│ ・回答一覧    │   │ ・本文入力     │   │ ・活動履歴    │
│ ・いいね      │   │ ・カテゴリー   │   │ ・感謝数      │
│ ・感謝        │   │ ・下書き保存   │   │ ・称号        │
└───────────────┘   └───────────────┘   └───────────────┘

サイドバーナビゲーション:
  ├─ ホーム
  ├─ 質問に回答
  ├─ プロフィール
  ├─ ガイドライン
  └─ チューサポについて
```

---

## 8. 開発ロードマップ

### 8.1 フェーズ1（完了）: フロントエンド開発

**期間**: 2025年6月〜現在

| 完了項目 |
|----------|
| 基本的なCRUD機能（質問・回答・ユーザー） |
| UI/UXデザインシステム |
| レスポンシブ対応 |
| アニメーション・インタラクション |
| ナビゲーション・履歴機能 |
| 下書き保存・復元機能 |
| モバイル最適化 |
| 感謝・マイルストーンシステム |
| インライン回答表示システム |

### 8.2 フェーズ2（計画中）: バックエンド開発

**目標機能**:
- ユーザー認証システム（JWT）
- データベース連携（PostgreSQL）
- APIエンドポイント（Node.js/Express または FastAPI）
- リアルタイム通知（WebSocket）

### 8.3 フェーズ3（将来）: 機能拡張

**目標機能**:
- 画像アップロード（症例画像・匿名化済み）
- AI機能統合（自動カテゴリー分類、類似質問提案）
- 高度な検索（全文検索、セマンティック検索）
- モバイルアプリ開発

---

## 9. 収益化計画

### 9.1 フリーミアムモデル

| プラン | 月額 | 機能 |
|--------|------|------|
| 無料 | 0円 | 質問閲覧、月3件まで質問投稿 |
| 個人プラン | 500円 | 無制限質問、優先表示、詳細統計 |
| プロプラン | 1,000円 | バッジ、優先サポート |
| 年間プラン | 5,000円 | 2ヶ月分お得 |

### 9.2 追加収益源（将来）

- 医療機器メーカー広告
- オンラインセミナー
- 穿刺技術認定制度
- 企業向けプラン

---

## 10. コンポーネント構成

### 10.1 主要コンポーネント一覧

| コンポーネント | 役割 |
|---------------|------|
| `App.tsx` | メインアプリケーション、状態管理 |
| `Header.tsx` | ヘッダー、通知アイコン |
| `Sidebar.tsx` | サイドナビゲーション |
| `QuestionCard.tsx` | 質問カード、インライン回答表示 |
| `QuestionDetail.tsx` | 質問詳細モーダル |
| `QuestionForm.tsx` | 質問投稿フォーム |
| `AnswerQuestions.tsx` | 回答一覧・投稿画面 |
| `SearchAndFilter.tsx` | 検索・フィルター |
| `Guidelines.tsx` | ガイドライン表示 |
| `AboutChusapo.tsx` | チューサポについて |
| `UserSelector.tsx` | ユーザー切り替え |
| `UserProfile.tsx` | プロフィール表示 |
| `MonthlyRanking.tsx` | 月間ランキング |
| `AchievementBadge.tsx` | 称号バッジ表示 |
| `NotificationList.tsx` | 通知一覧 |

### 10.2 カスタムフック

| フック | 役割 |
|--------|------|
| `useQuestions` | 質問データの管理 |
| `useAnswers` | 回答データの管理 |
| `useUser` | ユーザー情報の管理 |
| `useAuth` | 認証状態の管理 |
| `useGratitude` | 感謝システムの管理 |

---

## 11. 制約事項・既知の課題

### 11.1 現在の制限

| 項目 | 現状 | 将来対応 |
|------|------|----------|
| データ永続化 | LocalStorage（ブラウザ依存） | データベース連携 |
| リアルタイム通信 | 未実装 | WebSocket導入 |
| 画像アップロード | 未対応 | クラウドストレージ連携 |
| 通知システム | ブラウザ内のみ | プッシュ通知対応 |
| 認証 | 簡易ユーザー切り替えのみ | JWT認証システム |

### 11.2 開発環境の注意点

- macOS Sequoia環境でのlocalhost接続に制限あり
- Claude Code（CLI）でのコード編集、Cursorでの動作確認を推奨
- 開発サーバー: `npm run dev` で `http://localhost:5173` にアクセス

---

## 12. 用語集

| 用語 | 説明 |
|------|------|
| 穿刺 | 注射針やカテーテルを体内に挿入する医療行為 |
| ルート確保 | 点滴等のための静脈ライン確保 |
| 動脈穿刺 | 血液ガス検査等のための動脈アクセス |
| ベストアンサー | 質問者が選んだ最も役立った回答 |
| 感謝 | 回答を実践して効果があった際の評価 |
| いいね | 質問への称賛・共感の表現 |
| マイルストーン | 感謝数に応じた称号到達ポイント |

---

## 13. 参考資料

- `DEVELOPMENT_STATUS.md`: 詳細な開発状況報告書
- `FEATURE_DOCUMENTATION.md`: 実装機能完全リスト
- `CLAUDE.md`: 開発ガイドライン・約束事

---

**作成者**: Claude Code / 開発チーム
**承認者**: -
**次回レビュー予定**: バックエンド開発開始時
